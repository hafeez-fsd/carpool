{"ast":null,"code":"import { JwtHelperService } from '@auth0/angular-jwt';\nimport { User } from 'src/app/shared/models/user';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/shared/services/data.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nfunction LoginComponent_small_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 27);\n    i0.ɵɵtext(1, \" Email can't be empty!\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_small_34_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 27);\n    i0.ɵɵtext(1, \" Password can't be empty!\");\n    i0.ɵɵelementEnd();\n  }\n}\nexport class LoginComponent {\n  // {\n  //   id:1,\n  //   firstName:'',\n  //   lastName:'',\n  //   username:'',\n  //   type:1,\n  //   email:'',\n  //   password:'',\n  //   mobile:'',\n  //   isActive:false\n  // };\n  constructor(dataService, router) {\n    this.dataService = dataService;\n    this.router = router;\n    this.login = {\n      email: '',\n      password: ''\n    };\n    this.user = new User();\n  }\n  submitForm(loginForm) {\n    let user = {\n      email: this.login.email,\n      password: this.login.password\n    };\n    this.dataService.loginUser(user).subscribe(responseData => {\n      this.handleResponse(responseData);\n      this.login.email = '';\n      this.login.password = '';\n      loginForm.form.reset();\n      if (this.decodedToken != null) {\n        this.router.navigate(['/acc/menu']);\n      } else {\n        alert(\"Error! Wrong Credentials!\");\n      }\n    });\n  }\n  handleResponse(responseData) {\n    this.decodedToken = this.getDecodedAccessToken(responseData.data);\n    this.user.id = parseInt(this.decodedToken.id);\n    this.user.email = this.decodedToken.email;\n    this.user.firstName = this.decodedToken.firstName;\n    this.user.lastName = this.decodedToken.lastName;\n    this.user.password = this.decodedToken.password;\n    this.user.mobile = this.decodedToken.mobile;\n    this.user.username = this.decodedToken.username;\n    this.user.isActive = this.decodedToken.isActive == \"True\";\n    this.user.type = this.checkUserType(this.decodedToken.type);\n    this.dataService.loggedinUser = this.user;\n    localStorage.setItem('token', responseData.data);\n    localStorage.setItem('loggedinUser', JSON.stringify(this.user));\n    localStorage.setItem('id', this.user.id.toString());\n    localStorage.setItem('email', this.user.email);\n    localStorage.setItem('firstName', this.user.firstName);\n    localStorage.setItem('lastName', this.user.lastName);\n  }\n  getDecodedAccessToken(token) {\n    try {\n      let helper = new JwtHelperService();\n      return helper.decodeToken(token);\n    } catch (Error) {\n      return null;\n    }\n  }\n  checkUserType(type) {\n    if (type == \"AppUser\") {\n      return 1;\n    } else if (type == \"DbAdmin\") {\n      return 2;\n    } else return 3;\n  }\n}\nLoginComponent.ɵfac = function LoginComponent_Factory(t) {\n  return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.DataService), i0.ɵɵdirectiveInject(i2.Router));\n};\nLoginComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: LoginComponent,\n  selectors: [[\"app-login\"]],\n  decls: 45,\n  vars: 5,\n  consts: [[1, \"row\", \"vh-100\"], [1, \"col-8\", \"bg-img-cover\"], [\"src\", \"../../../assets/images/logo.png\", \"alt\", \"\", 1, \"img-fluid\", \"my-4\", \"ms-5\"], [1, \"ms-5\"], [1, \"gray-font-color\", \"heading-font-style\"], [1, \"orange-font-color\"], [1, \"violet-font-color\"], [1, \"gray-font-color\", \"ms-5\", \"tag-line\", \"fw-bold\"], [1, \"col-sm-12\", \"col-md-4\", \"bg-img-login\", \"bg-color-tint\"], [\"id\", \"login-form\", 1, \"my-3\", \"mx-5\", \"p-2\", 3, \"ngSubmit\"], [\"loginForm\", \"ngForm\"], [1, \"fw-bold\", \"text-white\", \"text-center\", \"login-header\", \"p-3\"], [1, \"row\", \"mt-5\"], [1, \"col-12\", \"p-2\"], [1, \"form-floating\", \"mb-3\"], [\"type\", \"email\", \"id\", \"email\", \"placeholder\", \"username@email.com\", \"minlength\", \"3\", \"maxlength\", \"20\", \"required\", \"\", \"name\", \"email\", \"autocomplete\", \"off\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"email\", \"ngModel\"], [\"for\", \"email\"], [\"class\", \"warning\", 4, \"ngIf\"], [\"type\", \"password\", \"id\", \"password\", \"placeholder\", \"password\", \"minlength\", \"3\", \"maxlength\", \"20\", \"required\", \"\", \"name\", \"password\", \"autocomplete\", \"off\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"password\", \"ngModel\"], [\"for\", \"password\"], [1, \"text-center\"], [\"type\", \"submit\", 1, \"btn\", \"m-2\", \"px-4\", \"p-2\", \"rounded-5\", \"border-0\", \"submit-button\", 3, \"disabled\"], [1, \"text-white\", \"fw-bold\"], [1, \"text-center\", \"text-white\"], [\"routerLink\", \"/auth/signup\", 1, \"fw-bold\", \"text-decoration-underline\", \"pointer\"], [1, \"warning\"]],\n  template: function LoginComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      const _r5 = i0.ɵɵgetCurrentView();\n      i0.ɵɵelementStart(0, \"div\")(1, \"div\", 0)(2, \"div\", 1);\n      i0.ɵɵelement(3, \"img\", 2);\n      i0.ɵɵelementStart(4, \"div\", 3)(5, \"h1\", 4);\n      i0.ɵɵtext(6, \"TURN \");\n      i0.ɵɵelementStart(7, \"span\", 5);\n      i0.ɵɵtext(8, \"MILES\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(9, \"h1\", 4);\n      i0.ɵɵtext(10, \"INTO \");\n      i0.ɵɵelementStart(11, \"span\", 6);\n      i0.ɵɵtext(12, \"MONEY\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(13, \"h4\", 7);\n      i0.ɵɵtext(14, \"RIDES ON TAP\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(15, \"div\", 8)(16, \"form\", 9, 10);\n      i0.ɵɵlistener(\"ngSubmit\", function LoginComponent_Template_form_ngSubmit_16_listener() {\n        i0.ɵɵrestoreView(_r5);\n        const _r0 = i0.ɵɵreference(17);\n        return i0.ɵɵresetView(ctx.submitForm(_r0));\n      });\n      i0.ɵɵelement(18, \"br\");\n      i0.ɵɵelementStart(19, \"h1\", 11);\n      i0.ɵɵtext(20, \"Log In\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(21, \"div\", 12)(22, \"div\", 13)(23, \"div\", 14)(24, \"input\", 15, 16);\n      i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_24_listener($event) {\n        return ctx.login.email = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(26, \"label\", 17);\n      i0.ɵɵtext(27, \"Enter Email Id\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(28, LoginComponent_small_28_Template, 2, 0, \"small\", 18);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(29, \"div\", 14)(30, \"input\", 19, 20);\n      i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_30_listener($event) {\n        return ctx.login.password = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(32, \"label\", 21);\n      i0.ɵɵtext(33, \"Enter Password\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(34, LoginComponent_small_34_Template, 2, 0, \"small\", 18);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(35, \"div\", 22)(36, \"button\", 23)(37, \"span\", 24);\n      i0.ɵɵtext(38, \"Submit\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelement(39, \"br\");\n      i0.ɵɵelementStart(40, \"div\", 25)(41, \"small\");\n      i0.ɵɵtext(42, \"Not a member yet? \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(43, \"span\", 26);\n      i0.ɵɵtext(44, \"SIGN UP\");\n      i0.ɵɵelementEnd()()()()()();\n    }\n    if (rf & 2) {\n      const _r0 = i0.ɵɵreference(17);\n      const _r1 = i0.ɵɵreference(25);\n      const _r3 = i0.ɵɵreference(31);\n      i0.ɵɵadvance(24);\n      i0.ɵɵproperty(\"ngModel\", ctx.login.email);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngIf\", _r1.touched && (_r1.errors == null ? null : _r1.errors[\"required\"]));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngModel\", ctx.login.password);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngIf\", _r3.touched && (_r3.errors == null ? null : _r3.errors[\"required\"]));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"disabled\", !_r0.form.valid);\n    }\n  },\n  dependencies: [i3.NgIf, i2.RouterLink, i4.ɵNgNoValidate, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.RequiredValidator, i4.MinLengthValidator, i4.MaxLengthValidator, i4.NgModel, i4.NgForm],\n  styles: [\"@import url(https://fonts.googleapis.com/css2?family=Noto+Sans:ital,wght@1,900&display=swap);.gray-font-color[_ngcontent-%COMP%] {\\n  color: rgb(53, 63, 85);\\n}\\n\\n.orange-font-color[_ngcontent-%COMP%] {\\n  color: rgb(255, 173, 24);\\n}\\n\\n.violet-font-color[_ngcontent-%COMP%] {\\n  color: rgb(147, 26, 255);\\n}\\n\\n.heading-font-style[_ngcontent-%COMP%] {\\n  font-family: \\\"Noto Sans\\\", sans-serif;\\n  font-size: 5em;\\n}\\n\\n.bg-img-cover[_ngcontent-%COMP%] {\\n  background-image: url('cover.png');\\n  background-repeat: no-repeat;\\n  background-size: 90% 50%;\\n  background-position: top 100% left 50%;\\n}\\n\\n@media only screen and (max-width: 767px) {\\n  .bg-img-cover[_ngcontent-%COMP%] {\\n    display: none;\\n  }\\n}\\n.tag-line[_ngcontent-%COMP%] {\\n  letter-spacing: 3px;\\n}\\n\\n.bg-img-login[_ngcontent-%COMP%] {\\n  background-image: url('authentication.png');\\n  background-repeat: no-repeat;\\n  background-size: 100% 90%;\\n  background-position: top 100% left 50%;\\n  background-blend-mode: luminosity;\\n}\\n\\n.bg-color-tint[_ngcontent-%COMP%] {\\n  background-color: rgb(147, 26, 255);\\n}\\n\\n.submit-button[_ngcontent-%COMP%] {\\n  background-color: rgb(255, 173, 24);\\n}\\n\\n.login-header[_ngcontent-%COMP%] {\\n  background-color: rgb(147, 26, 255);\\n}\\n\\n.warning[_ngcontent-%COMP%] {\\n  color: rgb(232, 74, 74);\\n}\\n\\n.pointer[_ngcontent-%COMP%] {\\n  cursor: pointer;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvYXV0aGVudGljYXRpb24vbG9naW4vbG9naW4uY29tcG9uZW50LnNjc3MiLCJ3ZWJwYWNrOi8vLi8uLi8uLi8uLi8uLi8uLi9NeSUyMHN0dWZmL1RlY2hub3ZlcnQlMjBJbnRlcm5zaGlwL1Rhc2slMjA1L3Rhc2stNS1jYXItcG9vbGluZy13ZWItYXBpLWNzaGFycC1oYWZlZXotZnNkL0NhcnBvb2wvc3JjL2FwcC9hdXRoZW50aWNhdGlvbi9sb2dpbi9sb2dpbi5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFFQTtFQUNJLHNCQUFBO0FDQUo7O0FER0E7RUFDSSx3QkFBQTtBQ0FKOztBREdBO0VBQ0ksd0JBQUE7QUNBSjs7QURHQTtFQUNJLG9DQUFBO0VBQ0EsY0FBQTtBQ0FKOztBREdBO0VBQ0ksa0NBQUE7RUFDQSw0QkFBQTtFQUNBLHdCQUFBO0VBQ0Esc0NBQUE7QUNBSjs7QURHQTtFQUNJO0lBQ0ksYUFBQTtFQ0FOO0FBQ0Y7QURHQTtFQUNJLG1CQUFBO0FDREo7O0FESUE7RUFDSSwyQ0FBQTtFQUNBLDRCQUFBO0VBQ0EseUJBQUE7RUFDQSxzQ0FBQTtFQUNBLGlDQUFBO0FDREo7O0FESUE7RUFDSSxtQ0FBQTtBQ0RKOztBRElBO0VBQ0ksbUNBQUE7QUNESjs7QURJQTtFQUNJLG1DQUFBO0FDREo7O0FESUE7RUFDSSx1QkFBQTtBQ0RKOztBRElBO0VBQ0ksZUFBQTtBQ0RKIiwic291cmNlc0NvbnRlbnQiOlsiQGltcG9ydCB1cmwoJ2h0dHBzOi8vZm9udHMuZ29vZ2xlYXBpcy5jb20vY3NzMj9mYW1pbHk9Tm90bytTYW5zOml0YWwsd2dodEAxLDkwMCZkaXNwbGF5PXN3YXAnKTtcblxuLmdyYXktZm9udC1jb2xvcntcbiAgICBjb2xvcjogcmdiYSg1Myw2Myw4NSwyNTUpO1xufVxuXG4ub3JhbmdlLWZvbnQtY29sb3J7XG4gICAgY29sb3I6IHJnYmEoMjU1LDE3MywyNCwyNTUpO1xufVxuXG4udmlvbGV0LWZvbnQtY29sb3J7XG4gICAgY29sb3I6IHJnYmEoMTQ3LDI2LDI1NSwyNTUpO1xufVxuXG4uaGVhZGluZy1mb250LXN0eWxle1xuICAgIGZvbnQtZmFtaWx5OiAnTm90byBTYW5zJywgc2Fucy1zZXJpZjtcbiAgICBmb250LXNpemU6IDVlbTtcbn1cblxuLmJnLWltZy1jb3ZlcntcbiAgICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJy4uLy4uLy4uL2Fzc2V0cy9pbWFnZXMvY292ZXIucG5nJyk7XG4gICAgYmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDtcbiAgICBiYWNrZ3JvdW5kLXNpemU6OTAlIDUwJTtcbiAgICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiB0b3AgMTAwJSBsZWZ0IDUwJTtcbn1cblxuQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA3NjdweCkge1xuICAgIC5iZy1pbWctY292ZXJ7XG4gICAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgfVxuICB9XG5cbi50YWctbGluZXtcbiAgICBsZXR0ZXItc3BhY2luZzogM3B4O1xufVxuXG4uYmctaW1nLWxvZ2lue1xuICAgIGJhY2tncm91bmQtaW1hZ2U6IHVybCgnLi4vLi4vLi4vYXNzZXRzL2ltYWdlcy9hdXRoZW50aWNhdGlvbi5wbmcnKTtcbiAgICBiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0O1xuICAgIGJhY2tncm91bmQtc2l6ZToxMDAlIDkwJTtcbiAgICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiB0b3AgMTAwJSBsZWZ0IDUwJTtcbiAgICBiYWNrZ3JvdW5kLWJsZW5kLW1vZGU6IGx1bWlub3NpdHk7XG59XG5cbi5iZy1jb2xvci10aW50e1xuICAgIGJhY2tncm91bmQtY29sb3I6cmdiYSgxNDcsMjYsMjU1LDI1NSk7XG59XG5cbi5zdWJtaXQtYnV0dG9ue1xuICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMjU1LDE3MywyNCwyNTUpO1xufVxuXG4ubG9naW4taGVhZGVye1xuICAgIGJhY2tncm91bmQtY29sb3I6cmdiYSgxNDcsMjYsMjU1LDI1NSkgO1xufVxuXG4ud2FybmluZ3tcbiAgICBjb2xvcjogcmdiKDIzMiwgNzQsIDc0KTtcbn1cblxuLnBvaW50ZXJ7XG4gICAgY3Vyc29yOiBwb2ludGVyO1xufSIsIkBpbXBvcnQgdXJsKFwiaHR0cHM6Ly9mb250cy5nb29nbGVhcGlzLmNvbS9jc3MyP2ZhbWlseT1Ob3RvK1NhbnM6aXRhbCx3Z2h0QDEsOTAwJmRpc3BsYXk9c3dhcFwiKTtcbi5ncmF5LWZvbnQtY29sb3Ige1xuICBjb2xvcjogcmdiKDUzLCA2MywgODUpO1xufVxuXG4ub3JhbmdlLWZvbnQtY29sb3Ige1xuICBjb2xvcjogcmdiKDI1NSwgMTczLCAyNCk7XG59XG5cbi52aW9sZXQtZm9udC1jb2xvciB7XG4gIGNvbG9yOiByZ2IoMTQ3LCAyNiwgMjU1KTtcbn1cblxuLmhlYWRpbmctZm9udC1zdHlsZSB7XG4gIGZvbnQtZmFtaWx5OiBcIk5vdG8gU2Fuc1wiLCBzYW5zLXNlcmlmO1xuICBmb250LXNpemU6IDVlbTtcbn1cblxuLmJnLWltZy1jb3ZlciB7XG4gIGJhY2tncm91bmQtaW1hZ2U6IHVybChcIi4uLy4uLy4uL2Fzc2V0cy9pbWFnZXMvY292ZXIucG5nXCIpO1xuICBiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0O1xuICBiYWNrZ3JvdW5kLXNpemU6IDkwJSA1MCU7XG4gIGJhY2tncm91bmQtcG9zaXRpb246IHRvcCAxMDAlIGxlZnQgNTAlO1xufVxuXG5AbWVkaWEgb25seSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDc2N3B4KSB7XG4gIC5iZy1pbWctY292ZXIge1xuICAgIGRpc3BsYXk6IG5vbmU7XG4gIH1cbn1cbi50YWctbGluZSB7XG4gIGxldHRlci1zcGFjaW5nOiAzcHg7XG59XG5cbi5iZy1pbWctbG9naW4ge1xuICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoXCIuLi8uLi8uLi9hc3NldHMvaW1hZ2VzL2F1dGhlbnRpY2F0aW9uLnBuZ1wiKTtcbiAgYmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDtcbiAgYmFja2dyb3VuZC1zaXplOiAxMDAlIDkwJTtcbiAgYmFja2dyb3VuZC1wb3NpdGlvbjogdG9wIDEwMCUgbGVmdCA1MCU7XG4gIGJhY2tncm91bmQtYmxlbmQtbW9kZTogbHVtaW5vc2l0eTtcbn1cblxuLmJnLWNvbG9yLXRpbnQge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMTQ3LCAyNiwgMjU1KTtcbn1cblxuLnN1Ym1pdC1idXR0b24ge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMjU1LCAxNzMsIDI0KTtcbn1cblxuLmxvZ2luLWhlYWRlciB7XG4gIGJhY2tncm91bmQtY29sb3I6IHJnYigxNDcsIDI2LCAyNTUpO1xufVxuXG4ud2FybmluZyB7XG4gIGNvbG9yOiByZ2IoMjMyLCA3NCwgNzQpO1xufVxuXG4ucG9pbnRlciB7XG4gIGN1cnNvcjogcG9pbnRlcjtcbn0iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n});","map":{"version":3,"mappings":"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","names":["JwtHelperService","User","i0","LoginComponent","constructor","dataService","router","email","password","submitForm","loginForm","user","login","loginUser","subscribe","responseData","handleResponse","form","reset","decodedToken","navigate","alert","getDecodedAccessToken","data","id","parseInt","firstName","lastName","mobile","username","isActive","type","checkUserType","loggedinUser","localStorage","setItem","JSON","stringify","toString","token","helper","decodeToken","Error","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["/Users/hafeez/My stuff/Technovert Internship/Task 5/task-5-car-pooling-web-api-csharp-hafeez-fsd/Carpool/src/app/authentication/login/login.component.ts","/Users/hafeez/My stuff/Technovert Internship/Task 5/task-5-car-pooling-web-api-csharp-hafeez-fsd/Carpool/src/app/authentication/login/login.component.html"],"sourcesContent":["import { Component } from '@angular/core';\nimport { NgForm } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { Login } from 'src/app/shared/models/login';\nimport { DataService } from 'src/app/shared/services/data.service';\nimport { JwtHelperService } from '@auth0/angular-jwt';\nimport { User } from 'src/app/shared/models/user';\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.scss']\n})\nexport class LoginComponent {\n\n  login:Login={\n    email:'',\n    password:'',\n  };\n\n  decodedToken:any;\n\n  user:User=new User();\n  // {\n  //   id:1,\n  //   firstName:'',\n  //   lastName:'',\n  //   username:'',\n  //   type:1,\n  //   email:'',\n  //   password:'',\n  //   mobile:'',\n  //   isActive:false\n  // };\n\n  constructor(private dataService:DataService, private router:Router) {\n    \n  }\n\n  submitForm(loginForm:NgForm){\n    let user:Login={\n      email:this.login.email,\n      password:this.login.password\n    };\n\n    this.dataService.loginUser(user).subscribe(\n      responseData=>{\n        this.handleResponse(responseData);\n        this.login.email='';\n        this.login.password='';  \n        loginForm.form.reset();\n\n        if(this.decodedToken!=null){\n          this.router.navigate(['/acc/menu']);\n        }\n        else{\n          alert(\"Error! Wrong Credentials!\");\n        }\n      }\n     );\n  }\n\n  handleResponse(responseData:any){\n    this.decodedToken=this.getDecodedAccessToken(responseData.data);\n    \n    this.user.id=parseInt(this.decodedToken.id);\n    this.user.email=this.decodedToken.email;\n    this.user.firstName=this.decodedToken.firstName;\n    this.user.lastName=this.decodedToken.lastName;\n    this.user.password=this.decodedToken.password;\n    this.user.mobile=this.decodedToken.mobile;\n    this.user.username=this.decodedToken.username;\n    this.user.isActive=(this.decodedToken.isActive)==\"True\";\n    this.user.type=this.checkUserType(this.decodedToken.type);\n\n    this.dataService.loggedinUser=this.user;\n    \n    localStorage.setItem('token', responseData.data);\n    localStorage.setItem('loggedinUser', JSON.stringify(this.user));\n    localStorage.setItem('id', this.user.id.toString());\n    localStorage.setItem('email', this.user.email );\n    localStorage.setItem('firstName', this.user.firstName );\n    localStorage.setItem('lastName', this.user.lastName );\n  }\n\n  getDecodedAccessToken(token: string): any {\n    try {\n      let helper= new JwtHelperService();\n      return helper.decodeToken(token);\n    } \n    catch(Error) {\n      return null;\n    }\n  }\n\n  checkUserType(type:string){\n    if(type==\"AppUser\")\n    {\n      return 1;\n    }\n    else if(type==\"DbAdmin\"){\n      return 2;\n    }\n    else return 3;\n  }\n\n}\n","<div>\n    <div class=\"row vh-100\">\n\n        <div class=\"col-8 bg-img-cover\">\n\n            <img src=\"../../../assets/images/logo.png\" class=\"img-fluid my-4 ms-5\" alt=\"\">\n\n            <div class=\"ms-5\">\n                <h1 class=\"gray-font-color heading-font-style\">TURN <span class=\"orange-font-color\">MILES</span></h1>\n                <h1 class=\"gray-font-color heading-font-style\">INTO <span class=\"violet-font-color\">MONEY</span></h1>\n            </div>\n            <h4 class=\"gray-font-color ms-5 tag-line fw-bold\">RIDES ON TAP</h4>\n        </div>\n\n        <div class=\"col-sm-12 col-md-4 bg-img-login bg-color-tint\">\n            <form class=\"my-3 mx-5 p-2\" id=\"login-form\" #loginForm=\"ngForm\" (ngSubmit)=\"submitForm(loginForm)\">\n                <br>\n                <h1 class=\"fw-bold text-white text-center login-header p-3\">Log In</h1>\n                <div class=\"row mt-5\">\n                    <div class=\"col-12 p-2\">\n\n                        <div class=\"form-floating mb-3\">\n                            <input type=\"email\" class=\"form-control\" id=\"email\" placeholder=\"username@email.com\"\n                                minlength=\"3\" maxlength=\"20\" required [(ngModel)]=\"login.email\" name=\"email\"\n                                #email=\"ngModel\" autocomplete=\"off\">\n                            <label for=\"email\">Enter Email Id</label>\n                            <small *ngIf=\"email.touched && email.errors?.['required']\" class=\"warning\"> Email can't be\n                                empty!</small>\n\n                        </div>\n\n                        <div class=\"form-floating mb-3\">\n                            <input type=\"password\" class=\"form-control\" id=\"password\" placeholder=\"password\"\n                                minlength=\"3\" maxlength=\"20\" required [(ngModel)]=\"login.password\" name=\"password\"\n                                #password=\"ngModel\" autocomplete=\"off\">\n                            <label for=\"password\">Enter Password</label>\n                            <small *ngIf=\"password.touched && password.errors?.['required']\" class=\"warning\"> Password\n                                can't be empty!</small>\n                        </div>\n\n                    </div>\n                </div>\n\n                <div class=\"text-center\">\n                    <button type=\"submit\" class=\"btn m-2 px-4 p-2 rounded-5 border-0 submit-button\"\n                        [disabled]=\"(!loginForm.form.valid)\"><span class=\"text-white fw-bold\">Submit</span></button>\n                </div>\n\n                <br>\n                <div class=\"text-center text-white\">\n                    <small>Not a member yet? </small> <span class=\"fw-bold text-decoration-underline pointer\"\n                        routerLink=\"/auth/signup\">SIGN UP</span>\n                </div>\n            </form>\n        </div>\n\n    </div>\n</div>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}